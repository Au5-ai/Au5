console.log("Au5 Extension background script loaded");chrome.runtime.onInstalled.addListener(e=>{console.log("Extension installed:",e),e.reason==="install"&&chrome.storage.sync.set({enabled:!0,settings:{theme:"light",notifications:!0}})});chrome.runtime.onMessage.addListener((e,a,t)=>{switch(console.log("Message received in background:",e),e.type){case"GET_TAB_INFO":a.tab&&t({success:!0,data:{url:a.tab.url,title:a.tab.title,id:a.tab.id}});break;case"STORAGE_GET":return chrome.storage.sync.get(e.keys,r=>{t({success:!0,data:r})}),!0;case"STORAGE_SET":return chrome.storage.sync.set(e.data,()=>{t({success:!0})}),!0;default:console.warn("Unknown message type:",e.type),t({success:!1,error:"Unknown message type"})}});chrome.tabs.onUpdated.addListener((e,a,t)=>{a.status==="complete"&&t.url&&console.log("Tab updated:",t.url)});
